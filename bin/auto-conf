#!/usr/bin/env ruby
# Auto 4
# Copyright (c) 2013, Auto Project
# Distributed under the terms of the FreeBSD license (LICENSE.md).

require 'slop'

# Check whether we're installed as a gem or a standalone
unless File.expand_path(__FILE__) =~ /^#{Regexp.escape File.join(Dir.home, '.gem')}/
  $:.unshift File.expand_path(File.join(File.dirname(__FILE__), '..', 'lib')) # Add the Auto libraries to LOAD_PATH
end

require 'auto/configure'

# Parse options.
opts = Slop.parse(:banner => "Usage: #$0 [options]") do
  on :h, :help, 'Display this help message.' do
    puts self
    exit 0
  end
  on :v, :version, 'Display version.' do
    puts <<-EOV
Auto Configure
Version #{Auto::Configure::VERSION}

http://auto.autoproj.org
https://github.com/Auto/Auto/wiki/Auto-Configure
    EOV
    exit 0
  end

  on :p, :plugin, 'Install a plugin.' do
  on :s, :shell, 'Modify and interact with your existing configuration.'
end

# Configure.
autoconf = Auto::Configure.new

if opts.shell?
  autoconf.shell.go
else
  autoconf.generate
end

# vim: set ts=4 sts=2 sw=2 et:
